import{m as $,r as x,z as Y,f as U,x as w,c as i,o as u,a as t,q as b,F as D,h as N,B as y,E as j,t as m,G as M,C as A,i as L,H as q,s as E,e as B,d as h}from"./CdjRxmqw.js";import{_ as I}from"./DlAUqK2U.js";const P={class:"bg-white rounded-lg shadow-sm border p-6"},z={class:"mb-6"},K={class:"space-y-2 max-h-48 overflow-y-auto"},T=["value"],J={class:"text-sm text-gray-700"},Q={class:"mb-6"},W={class:"space-y-2"},X=["value"],Z={class:"text-sm text-gray-700"},ee={class:"mb-6"},te={class:"block text-sm font-medium text-gray-700 mb-3"},le={class:"mb-6"},ae={class:"flex space-x-2"},se=["placeholder","min","max"],ne=["placeholder","min","max"],oe={class:"mb-6"},re={key:0,class:"text-sm text-blue-600 font-medium"},ie={__name:"FilterSidebar",props:{category:{type:String,required:!0},type:{type:String,required:!1,validator:c=>["movie","tv"].includes(c)},initialFilters:{type:Object,default:()=>({})}},emits:["filters-changed"],setup(c,{emit:H}){const d=c,_=H,o=$(()=>d.category?.includes("movie")?"movie":d.category?.includes("tv")?"tv":d.type||"movie"),k=x([]),g=x([]),p=x("popularity.desc"),v=x(0),a=x(""),s=x(""),r=x(""),F=new Date().getFullYear(),V=$(()=>{const e=[{value:"popularity.desc",label:"Popularity (High to Low)"},{value:"popularity.asc",label:"Popularity (Low to High)"},{value:"vote_average.desc",label:"Rating (High to Low)"},{value:"vote_average.asc",label:"Rating (Low to High)"}];return o.value==="movie"?[...e,{value:"release_date.desc",label:"Release Date (Newest)"},{value:"release_date.asc",label:"Release Date (Oldest)"}]:[...e,{value:"first_air_date.desc",label:"Air Date (Newest)"},{value:"first_air_date.asc",label:"Air Date (Oldest)"}]}),R=$(()=>{let e=0;return g.value.length>0&&e++,p.value!=="popularity.desc"&&e++,v.value>0&&e++,(a.value||s.value)&&e++,r.value&&e++,e}),O=async()=>{try{const e=B(),l=o.value==="movie"?"/genre/movie/list":"/genre/tv/list",n=await $fetch(`https://api.themoviedb.org/3${l}`,{params:{api_key:e.public.tmdbApiKey,language:"en-US"}});k.value=n.genres||[]}catch(e){console.error("Error fetching genres:",e),k.value=[]}},f=()=>{const e={genres:g.value,sort:p.value,minRating:v.value>0?v.value:null,minYear:a.value||null,maxYear:s.value||null,language:r.value||null};w().setFilters(d.category,e),_("filters-changed",e)},G=()=>{g.value=[],p.value="popularity.desc",v.value=0,a.value="",s.value="",r.value="",w().clearFilters(d.category),f()},S=e=>{e.genres&&(g.value=Array.isArray(e.genres)?e.genres:[e.genres]),e.sort&&(p.value=e.sort),e.minRating&&(v.value=e.minRating),e.minYear&&(a.value=e.minYear),e.maxYear&&(s.value=e.maxYear),e.language&&(r.value=e.language)};return Y(()=>o.value,()=>{O()},{immediate:!0}),Y(()=>d.category,e=>{if(e){const n=w().getFilters(e);n&&S(n)}},{immediate:!0}),Y(()=>d.initialFilters,e=>{e&&S(e)},{immediate:!0,deep:!0}),U(()=>{O();const l=w().getFilters(d.category);l?S(l):d.initialFilters&&S(d.initialFilters)}),(e,l)=>(u(),i("div",P,[t("div",{class:"flex items-center justify-between mb-6"},[l[6]||(l[6]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Filters",-1)),t("button",{onClick:G,class:"text-sm text-blue-600 hover:text-blue-700 font-medium"}," Clear All ")]),t("div",z,[l[7]||(l[7]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"Genres",-1)),t("div",K,[(u(!0),i(D,null,N(k.value,n=>(u(),i("label",{key:n.id,class:"flex items-center space-x-2 cursor-pointer hover:bg-gray-50 p-2 rounded"},[y(t("input",{type:"checkbox",value:n.id,"onUpdate:modelValue":l[0]||(l[0]=C=>g.value=C),onChange:f,class:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,40,T),[[j,g.value]]),t("span",J,m(n.name),1)]))),128))])]),t("div",Q,[l[8]||(l[8]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"Sort by",-1)),t("div",W,[(u(!0),i(D,null,N(V.value,n=>(u(),i("label",{key:n.value,class:"flex items-center space-x-2 cursor-pointer hover:bg-gray-50 p-2 rounded"},[y(t("input",{type:"radio",value:n.value,"onUpdate:modelValue":l[1]||(l[1]=C=>p.value=C),onChange:f,class:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"},null,40,X),[[M,p.value]]),t("span",Z,m(n.label),1)]))),128))])]),t("div",ee,[t("label",te," Minimum Rating: "+m(v.value),1),y(t("input",{type:"range",min:"0",max:"10",step:"0.5","onUpdate:modelValue":l[2]||(l[2]=n=>v.value=n),onInput:f,class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"},null,544),[[A,v.value]]),l[9]||(l[9]=t("div",{class:"flex justify-between text-xs text-gray-500 mt-1"},[t("span",null,"0"),t("span",null,"5"),t("span",null,"10")],-1))]),t("div",le,[l[11]||(l[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"Release Year",-1)),t("div",ae,[y(t("input",{type:"number","onUpdate:modelValue":l[3]||(l[3]=n=>a.value=n),onInput:f,placeholder:c.type==="movie"?"1900":"1950",min:c.type==="movie"?1900:1950,max:L(F),class:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,40,se),[[A,a.value]]),l[10]||(l[10]=t("span",{class:"text-gray-500 self-center"},"to",-1)),y(t("input",{type:"number","onUpdate:modelValue":l[4]||(l[4]=n=>s.value=n),onInput:f,placeholder:L(F).toString(),min:c.type==="movie"?1900:1950,max:L(F)+2,class:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,40,ne),[[A,s.value]])])]),t("div",oe,[l[13]||(l[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"Language",-1)),y(t("select",{"onUpdate:modelValue":l[5]||(l[5]=n=>r.value=n),onChange:f,class:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},l[12]||(l[12]=[E('<option value="" data-v-503f8e8f>All Languages</option><option value="en" data-v-503f8e8f>English</option><option value="es" data-v-503f8e8f>Spanish</option><option value="fr" data-v-503f8e8f>French</option><option value="de" data-v-503f8e8f>German</option><option value="it" data-v-503f8e8f>Italian</option><option value="ja" data-v-503f8e8f>Japanese</option><option value="ko" data-v-503f8e8f>Korean</option><option value="zh" data-v-503f8e8f>Chinese</option>',9)]),544),[[q,r.value]])]),R.value>0?(u(),i("div",re,m(R.value)+" filter"+m(R.value!==1?"s":"")+" active ",1)):b("",!0)]))}},he=I(ie,[["__scopeId","data-v-503f8e8f"]]),ue={key:0,class:"bg-gray-50 rounded-lg p-4 mb-6"},de={class:"flex items-center justify-between mb-3"},me={class:"flex flex-wrap gap-2"},ve=["onClick"],ce={key:0,class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"},ge={key:1,class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"},pe={key:2,class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},fe={key:3,class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},xe={key:4,class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800"},_e={__name:"ActiveFilters",props:{category:{type:String,required:!0},filters:{type:Object,required:!1},genres:{type:Array,default:()=>[]}},emits:["clear-all","remove-genre","remove-sort","remove-rating","remove-year","remove-language","filters-changed"],setup(c,{emit:H}){const d=w(),_=c,o=$(()=>_.filters||d.getFilters(_.category)||{genres:[],sort:"popularity.desc",minRating:null,minYear:null,maxYear:null,language:null}),k=$(()=>{const a=o.value;return a.genres&&a.genres.length>0||a.sort&&a.sort!=="popularity.desc"||a.minRating&&a.minRating>0||a.minYear||a.maxYear||a.language}),g=a=>{const s=_.genres.find(r=>r.id===a);return s?s.name:`Genre ${a}`},p=a=>({"popularity.desc":"Popularity (High to Low)","popularity.asc":"Popularity (Low to High)","vote_average.desc":"Rating (High to Low)","vote_average.asc":"Rating (Low to High)","release_date.desc":"Release Date (Newest)","release_date.asc":"Release Date (Oldest)","first_air_date.desc":"Air Date (Newest)","first_air_date.asc":"Air Date (Oldest)"})[a]||a,v=a=>({en:"English",es:"Spanish",fr:"French",de:"German",it:"Italian",ja:"Japanese",ko:"Korean",zh:"Chinese"})[a]||a;return(a,s)=>k.value?(u(),i("div",ue,[t("div",de,[s[6]||(s[6]=t("h4",{class:"text-sm font-medium text-gray-700"},"Active Filters",-1)),t("button",{onClick:s[0]||(s[0]=r=>a.$emit("clear-all")),class:"text-xs text-blue-600 hover:text-blue-700 font-medium"}," Clear All ")]),t("div",me,[(u(!0),i(D,null,N(o.value.genres,r=>(u(),i("div",{key:`genre-${r}`,class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},[h(m(g(r))+" ",1),t("button",{onClick:F=>a.$emit("remove-genre",r),class:"ml-2 text-blue-600 hover:text-blue-800 font-bold"}," × ",8,ve)]))),128)),o.value.sort&&o.value.sort!=="popularity.desc"?(u(),i("div",ce,[h(m(p(o.value.sort))+" ",1),t("button",{onClick:s[1]||(s[1]=r=>a.$emit("remove-sort")),class:"ml-2 text-green-600 hover:text-green-800 font-bold"}," × ")])):b("",!0),o.value.minRating&&o.value.minRating>0?(u(),i("div",ge,[h(" Rating ≥ "+m(o.value.minRating)+" ",1),t("button",{onClick:s[2]||(s[2]=r=>a.$emit("remove-rating")),class:"ml-2 text-yellow-600 hover:text-yellow-800 font-bold"}," × ")])):b("",!0),o.value.minYear?(u(),i("div",pe,[h(" From "+m(o.value.minYear)+" ",1),t("button",{onClick:s[3]||(s[3]=r=>a.$emit("remove-year","min")),class:"ml-2 text-purple-600 hover:text-purple-800 font-bold"}," × ")])):b("",!0),o.value.maxYear?(u(),i("div",fe,[h(" Until "+m(o.value.maxYear)+" ",1),t("button",{onClick:s[4]||(s[4]=r=>a.$emit("remove-year","max")),class:"ml-2 text-purple-600 hover:text-purple-800 font-bold"}," × ")])):b("",!0),o.value.language?(u(),i("div",xe,[h(m(v(o.value.language))+" ",1),t("button",{onClick:s[5]||(s[5]=r=>a.$emit("remove-language")),class:"ml-2 text-orange-600 hover:text-orange-800 font-bold"}," × ")])):b("",!0)])])):b("",!0)}};export{he as _,_e as a};
