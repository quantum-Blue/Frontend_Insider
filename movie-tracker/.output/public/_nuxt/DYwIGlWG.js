import{r as d,c as r,o as a,a as e,B as E,q as g,C as K,D as Q,p as U,g as H,y as Y,m as h,f as G,b as J,n as w,t as i,d as O,F as N,h as A,e as W,j as L,w as X}from"./CdjRxmqw.js";import{_ as Z}from"./C7qF5aok.js";import{_ as ee}from"./8q7ltWUn.js";import"./DlAUqK2U.js";const te={class:"relative max-w-md mx-auto"},se={class:"relative"},oe=["disabled"],ae={__name:"SearchInput",emits:["search","clear"],setup(P,{expose:x,emit:S}){const p=S,o=d(""),y=()=>{o.value.trim()||p("clear")},c=()=>{o.value.trim()&&p("search",o.value.trim())},m=()=>{o.value="",p("clear")};return x({searchQuery:o,clearSearch:m}),(f,n)=>(a(),r("div",te,[e("div",se,[E(e("input",{"onUpdate:modelValue":n[0]||(n[0]=u=>o.value=u),onInput:y,onKeyup:Q(c,["enter"]),type:"text",placeholder:"Search movies and TV shows...",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all duration-200"},null,544),[[K,o.value]]),n[2]||(n[2]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),o.value?(a(),r("button",{key:0,onClick:m,class:"absolute inset-y-0 right-0 pr-3 flex items-center"},n[1]||(n[1]=[e("svg",{class:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):g("",!0)]),e("button",{onClick:c,disabled:!o.value.trim(),class:"mt-3 w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200"}," Search ",8,oe)]))}},re={class:"container mx-auto px-4 py-8"},le={class:"max-w-2xl mx-auto mb-8"},ne={key:0,class:"flex justify-center mb-6"},ie={class:"bg-gray-100 rounded-lg p-1"},ue={key:1,class:"text-center py-12"},de={key:2,class:"text-center py-12"},ce={class:"text-gray-500 mb-4"},ve={key:3,class:"text-center py-12"},me={key:4,class:"text-center py-12"},pe={class:"text-gray-500 mb-4"},he={key:5,class:"space-y-8"},ge={class:"text-center"},ye={class:"text-gray-600"},xe={key:0},fe={class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4"},_e={class:"aspect-[3/4] bg-gray-200 rounded-lg overflow-hidden mb-3 group-hover:shadow-lg transition-all duration-300"},be=["src","alt"],ke={key:1,class:"w-full h-full bg-gray-300 flex items-center justify-center"},we={class:"font-semibold text-gray-900 text-sm group-hover:text-blue-600 transition-colors"},Se={key:0,class:"text-gray-600 text-xs"},Ce={key:1,class:"mt-1"},Me={class:"text-xs text-gray-500"},$e={key:0,class:"text-center"},Te=["disabled"],Be={key:0},Re={key:1},Ve={class:"text-center text-sm text-gray-500"},Ne={__name:"search",setup(P){U({title:"Search - Movie Tracker",ogTitle:"Search - Movie Tracker",description:"Search for your favorite movies and TV shows. Find detailed information, ratings, and more.",ogDescription:"Search for your favorite movies and TV shows. Find detailed information, ratings, and more."});const x=W(),S=H(),p=Y(),o=d([]),y=d(!1),c=d(!1),m=d(null),f=d(!1),n=d(""),u=d("all"),_=d(1),B=d(1),R=d(0),C=d(null),V=h(()=>o.value.filter(l=>l.media_type==="movie")),j=h(()=>o.value.filter(l=>l.media_type==="tv")),F=h(()=>o.value.filter(l=>l.media_type==="person")),M=h(()=>{switch(u.value){case"movie":return V.value;case"tv":return j.value;case"person":return F.value;default:return o.value}}),$=h(()=>M.value),z=h(()=>_.value<B.value),b=async(l,t=1,T=!1)=>{if(l?.trim()){t===1?(y.value=!0,f.value=!0,n.value=l,await p.push({path:"/search",query:{q:l}})):c.value=!0,m.value=null;try{const v=await $fetch(`${x.public.tmdbBaseUrl}/search/multi`,{params:{api_key:x.public.tmdbApiKey,language:"en-US",query:l,page:t}}),k=v.results?.filter(s=>s.media_type==="movie"||s.media_type==="tv"||s.media_type==="person")||[];T?o.value=[...o.value,...k]:o.value=k,_.value=v.page||1,B.value=v.total_pages||1,R.value=v.total_results||0}catch(v){m.value="Failed to search. Please try again.",console.error("Error searching:",v)}finally{y.value=!1,c.value=!1}}},q=()=>{o.value=[],f.value=!1,n.value="",u.value="all",_.value=1,p.push({path:"/search"})},D=()=>{!c.value&&z.value&&b(n.value,_.value+1,!0)};return G(()=>{const l=S.query.q;l&&typeof l=="string"&&(C.value&&(C.value.searchQuery=l),b(l))}),(l,t)=>{const T=ae,v=Z,k=ee;return a(),r("div",re,[t[13]||(t[13]=e("div",{class:"text-center mb-8"},[e("h1",{class:"text-3xl md:text-4xl font-bold text-gray-800 mb-4"}," Search "),e("p",{class:"text-gray-600 max-w-2xl mx-auto"}," Find your favorite movies and TV shows. Search by title, actor, director, or genre. ")],-1)),e("div",le,[J(T,{ref_key:"searchInput",ref:C,onSearch:b,onClear:q},null,512)]),o.value.length>0?(a(),r("div",ne,[e("div",ie,[e("button",{onClick:t[0]||(t[0]=s=>u.value="all"),class:w(["px-4 py-2 rounded-md text-sm font-medium transition-colors",u.value==="all"?"bg-white text-blue-600 shadow":"text-gray-600 hover:text-gray-800"])}," All ("+i(o.value.length)+") ",3),e("button",{onClick:t[1]||(t[1]=s=>u.value="movie"),class:w(["px-4 py-2 rounded-md text-sm font-medium transition-colors",u.value==="movie"?"bg-white text-blue-600 shadow":"text-gray-600 hover:text-gray-800"])}," Movies ("+i(V.value.length)+") ",3),e("button",{onClick:t[2]||(t[2]=s=>u.value="tv"),class:w(["px-4 py-2 rounded-md text-sm font-medium transition-colors",u.value==="tv"?"bg-white text-blue-600 shadow":"text-gray-600 hover:text-gray-800"])}," TV Shows ("+i(j.value.length)+") ",3),e("button",{onClick:t[3]||(t[3]=s=>u.value="person"),class:w(["px-4 py-2 rounded-md text-sm font-medium transition-colors",u.value==="person"?"bg-white text-blue-600 shadow":"text-gray-600 hover:text-gray-800"])}," People ("+i(F.value.length)+") ",3)])])):g("",!0),y.value?(a(),r("div",ue,t[5]||(t[5]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Searching...",-1)]))):m.value?(a(),r("div",de,[t[6]||(t[6]=e("svg",{class:"mx-auto h-12 w-12 text-red-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t[7]||(t[7]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Search Error",-1)),e("p",ce,i(m.value),1),e("button",{onClick:t[4]||(t[4]=s=>b(n.value)),class:"btn-primary"}," Try Again ")])):f.value?o.value.length===0?(a(),r("div",me,[t[9]||(t[9]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.239 0-4.236-.911-5.676-2.384C6.306 12.5 6.286 12.381 6.272 12.264A8 8 0 1112 4a7.963 7.963 0 014.834 1.646"})],-1)),t[10]||(t[10]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No Results Found",-1)),e("p",pe,`Sorry, we couldn't find any results for "`+i(n.value)+'"',1),t[11]||(t[11]=e("p",{class:"text-sm text-gray-400"},"Try searching with different keywords or check your spelling.",-1))])):(a(),r("div",he,[e("div",ge,[e("p",ye,[O(" Found "+i(M.value.length)+" result"+i(M.value.length!==1?"s":"")+" ",1),n.value?(a(),r("span",xe,'for "'+i(n.value)+'"',1)):g("",!0)])]),e("div",fe,[u.value!=="person"?(a(!0),r(N,{key:0},A($.value,s=>(a(),L(v,{key:`${s.media_type||"movie"}-${s.id}`,item:s,type:s.media_type||"movie"},null,8,["item","type"]))),128)):(a(!0),r(N,{key:1},A($.value,s=>(a(),L(k,{key:`person-${s.id}`,to:`/person/${s.id}`,class:"group cursor-pointer block"},{default:X(()=>[e("div",_e,[s.profile_path?(a(),r("img",{key:0,src:`https://image.tmdb.org/t/p/w500${s.profile_path}`,alt:s.name,class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"},null,8,be)):(a(),r("div",ke,t[12]||(t[12]=[e("svg",{class:"w-16 h-16 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule":"evenodd"})],-1)])))]),e("h3",we,i(s.name),1),s.known_for_department?(a(),r("p",Se,i(s.known_for_department),1)):g("",!0),s.known_for&&s.known_for.length>0?(a(),r("div",Ce,[e("p",Me," Known for: "+i(s.known_for.slice(0,2).map(I=>I.title||I.name).join(", ")),1)])):g("",!0)]),_:2},1032,["to"]))),128))]),z.value?(a(),r("div",$e,[e("button",{onClick:D,disabled:c.value,class:"btn-secondary"},[c.value?(a(),r("span",Be,"Loading...")):(a(),r("span",Re,"Load More"))],8,Te)])):g("",!0),e("div",Ve," Showing "+i($.value.length)+" of "+i(R.value)+" results ",1)])):(a(),r("div",ve,t[8]||(t[8]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1),e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Start Your Search",-1),e("p",{class:"text-gray-500"},"Enter a movie or TV show title to begin exploring.",-1)])))])}}};export{Ne as default};
