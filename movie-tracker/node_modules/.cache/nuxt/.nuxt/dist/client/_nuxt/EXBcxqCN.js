import{_ as q}from"./8q7ltWUn.js";import{_ as N,a as P}from"./CSULd7xk.js";import{_ as $}from"./C7qF5aok.js";import{p as D,x as V,g as E,y as U,r as u,m as f,z,f as H,c as o,a as e,b as y,w as T,F as A,h as L,t as h,q as O,e as Q,o as s,d as R,j as K}from"./CdjRxmqw.js";import"./DlAUqK2U.js";const G={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},I={class:"mb-6"},J={class:"flex items-center space-x-2 text-sm text-gray-500"},W={class:"flex gap-8"},X={class:"flex-1"},Y={key:0,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6"},Z={key:1,class:"text-center py-12"},ee={class:"text-gray-500 mb-4"},te={key:2,class:"space-y-8"},se={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6"},oe={key:0,class:"text-center"},le=["disabled"],ae={key:0},re={key:1},ie={class:"text-center text-sm text-gray-500"},ne={key:3,class:"text-center py-12"},l="movies-top-rated",pe={__name:"top-rated",setup(de){D({title:"Top Rated Movies - Movie Tracker",ogTitle:"Top Rated Movies - Movie Tracker",description:"Discover the highest-rated movies. Find critically acclaimed and fan-favorite films.",ogDescription:"Discover the highest-rated movies. Find critically acclaimed and fan-favorite films."});const a=V(),k=Q(),x=E(),w=U(),r=u([]),n=u(!1),g=u(null),_=u(1),F=u(1),M=u(0);f(()=>a.getFilters(l));const B=f(()=>a.hasActiveFilters(l)),C=f(()=>_.value<F.value),c=async(v=1,t=!1)=>{n.value=!0,g.value=null;try{const d=a.buildApiParams(l,k.public.tmdbApiKey),b=B.value?"/discover/movie":"/movie/top_rated",i=await $fetch(`${k.public.tmdbBaseUrl}${b}`,{params:{...d,page:v}});t?r.value=[...r.value,...i.results]:r.value=i.results,_.value=i.page,F.value=i.total_pages,M.value=i.total_results;const p=a.buildUrlQuery(l);Object.keys(p).length>0?await w.replace({query:p}):await w.replace({query:{}})}catch(d){console.error("Error fetching movies:",d),g.value="Failed to load movies. Please try again."}finally{n.value=!1}},S=()=>{C.value&&!n.value&&c(_.value+1,!0)},j=()=>{a.resetCategory(l),c()};return z(()=>a.getFilters(l),v=>{v&&c()},{deep:!0}),H(()=>{x.query&&Object.keys(x.query).length>0&&a.setFromUrlQuery(l,x.query),c()}),(v,t)=>{const d=q,b=N,i=P,p=$;return s(),o("div",G,[e("nav",I,[e("ol",J,[e("li",null,[y(d,{to:"/",class:"hover:text-blue-600"},{default:T(()=>t[1]||(t[1]=[R("Home",-1)])),_:1,__:[1]})]),t[3]||(t[3]=e("li",null,"/",-1)),e("li",null,[y(d,{to:"/movies",class:"hover:text-blue-600"},{default:T(()=>t[2]||(t[2]=[R("Movies",-1)])),_:1,__:[2]})]),t[4]||(t[4]=e("li",null,"/",-1)),t[5]||(t[5]=e("li",{class:"text-gray-900 font-medium"},"Top Rated",-1))])]),t[12]||(t[12]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900"},"Top Rated Movies"),e("p",{class:"text-gray-600 mt-2"}," Highest-rated movies based on user ratings ")],-1)),e("div",W,[y(b,{category:l}),e("div",X,[y(i,{category:l,class:"mb-6"}),n.value&&r.value.length===0?(s(),o("div",Y,[(s(),o(A,null,L(20,m=>e("div",{key:m,class:"animate-pulse"},t[6]||(t[6]=[e("div",{class:"aspect-[2/3] bg-gray-300 rounded-lg mb-4"},null,-1),e("div",{class:"h-4 bg-gray-300 rounded mb-2"},null,-1),e("div",{class:"h-3 bg-gray-300 rounded w-2/3"},null,-1)]))),64))])):g.value?(s(),o("div",Z,[t[7]||(t[7]=e("svg",{class:"mx-auto h-12 w-12 text-red-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1)),t[8]||(t[8]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Error Loading Movies",-1)),e("p",ee,h(g.value),1),e("button",{onClick:t[0]||(t[0]=m=>c()),class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"}," Try Again ")])):r.value.length>0?(s(),o("div",te,[e("div",se,[(s(!0),o(A,null,L(r.value,m=>(s(),K(p,{key:m.id,item:m,type:"movie"},null,8,["item"]))),128))]),C.value?(s(),o("div",oe,[e("button",{onClick:S,disabled:n.value,class:"px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[n.value?(s(),o("span",ae,"Loading...")):(s(),o("span",re,"Load More"))],8,le)])):O("",!0),e("div",ie," Showing "+h(r.value.length)+" of "+h(M.value.toLocaleString())+" results ",1)])):(s(),o("div",ne,[t[9]||(t[9]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.239 0-4.236-.911-5.676-2.384C6.306 12.5 6.286 12.381 6.272 12.264A8 8 0 1112 4a7.963 7.963 0 014.834 1.646"})],-1)),t[10]||(t[10]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No Movies Found",-1)),t[11]||(t[11]=e("p",{class:"text-gray-500 mb-4"},"Try adjusting your filters to see more results.",-1)),e("button",{onClick:j,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"}," Clear Filters ")]))])])])}}};export{pe as default};
