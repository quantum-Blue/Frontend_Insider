{"version":3,"file":"upcoming-5_eNs8Wz.js","sources":["../../../../../../../pages/movies/upcoming.vue"],"sourcesContent":["<template>\r\n  <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n    <!-- Breadcrumb -->\r\n    <nav class=\"mb-6\">\r\n      <ol class=\"flex items-center space-x-2 text-sm text-gray-500\">\r\n        <li>\r\n          <NuxtLink to=\"/\" class=\"hover:text-blue-600\">Home</NuxtLink>\r\n        </li>\r\n        <li>/</li>\r\n        <li>\r\n          <NuxtLink to=\"/movies\" class=\"hover:text-blue-600\">Movies</NuxtLink>\r\n        </li>\r\n        <li>/</li>\r\n        <li class=\"text-gray-900 font-medium\">Upcoming</li>\r\n      </ol>\r\n    </nav>\r\n\r\n    <!-- Page Header -->\r\n    <div class=\"mb-8\">\r\n      <h1 class=\"text-3xl font-bold text-gray-900\">Upcoming Movies</h1>\r\n      <p class=\"text-gray-600 mt-2\">\r\n        Get excited for the latest upcoming movie releases\r\n      </p>\r\n    </div>\r\n\r\n    <div class=\"flex gap-8\">\r\n      <!-- Filter Sidebar -->\r\n      <FilterSidebar :category=\"category\" />\r\n\r\n      <!-- Main Content -->\r\n      <div class=\"flex-1\">\r\n        <!-- Active Filters -->\r\n        <ActiveFilters \r\n          :category=\"category\" \r\n          class=\"mb-6\"\r\n        />\r\n\r\n        <!-- Loading Skeleton -->\r\n        <div v-if=\"loading && movies.length === 0\" class=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6\">\r\n          <div v-for=\"n in 20\" :key=\"n\" class=\"animate-pulse\">\r\n            <div class=\"aspect-[2/3] bg-gray-300 rounded-lg mb-4\"></div>\r\n            <div class=\"h-4 bg-gray-300 rounded mb-2\"></div>\r\n            <div class=\"h-3 bg-gray-300 rounded w-2/3\"></div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Error State -->\r\n        <div v-else-if=\"error\" class=\"text-center py-12\">\r\n          <svg class=\"mx-auto h-12 w-12 text-red-400 mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\" />\r\n          </svg>\r\n          <h3 class=\"text-lg font-medium text-gray-900 mb-2\">Error Loading Movies</h3>\r\n          <p class=\"text-gray-500 mb-4\">{{ error }}</p>\r\n          <button\r\n            @click=\"fetchMovies()\"\r\n            class=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors\"\r\n          >\r\n            Try Again\r\n          </button>\r\n        </div>\r\n\r\n        <!-- Movies Grid -->\r\n        <div v-else-if=\"movies.length > 0\" class=\"space-y-8\">\r\n          <!-- Movies Grid -->\r\n          <div class=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6\">\r\n            <PosterCard\r\n              v-for=\"movie in movies\"\r\n              :key=\"movie.id\"\r\n              :item=\"movie\"\r\n              type=\"movie\"\r\n            />\r\n          </div>\r\n\r\n          <!-- Load More Button -->\r\n          <div v-if=\"hasMorePages\" class=\"text-center\">\r\n            <button\r\n              @click=\"loadMore\"\r\n              :disabled=\"loading\"\r\n              class=\"px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n            >\r\n              <span v-if=\"loading\">Loading...</span>\r\n              <span v-else>Load More</span>\r\n            </button>\r\n          </div>\r\n\r\n          <!-- Results Info -->\r\n          <div class=\"text-center text-sm text-gray-500\">\r\n            Showing {{ movies.length }} of {{ totalResults.toLocaleString() }} results\r\n          </div>\r\n        </div>\r\n\r\n        <!-- No Results -->\r\n        <div v-else class=\"text-center py-12\">\r\n          <svg class=\"mx-auto h-12 w-12 text-gray-400 mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.239 0-4.236-.911-5.676-2.384C6.306 12.5 6.286 12.381 6.272 12.264A8 8 0 1112 4a7.963 7.963 0 014.834 1.646\" />\r\n          </svg>\r\n          <h3 class=\"text-lg font-medium text-gray-900 mb-2\">No Movies Found</h3>\r\n          <p class=\"text-gray-500 mb-4\">Try adjusting your filters to see more results.</p>\r\n          <button\r\n            @click=\"clearAllFilters\"\r\n            class=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors\"\r\n          >\r\n            Clear Filters\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted, watch } from 'vue'\r\nimport { useFiltersStore } from '~/stores/filters'\r\n\r\n// SEO Meta\r\ndefinePageMeta({\r\n  title: 'Upcoming Movies'\r\n})\r\n\r\nuseSeoMeta({\r\n  title: 'Upcoming Movies - Movie Tracker',\r\n  ogTitle: 'Upcoming Movies - Movie Tracker',\r\n  description: 'Discover upcoming movies. Get excited for the latest movie releases coming soon.',\r\n  ogDescription: 'Discover upcoming movies. Get excited for the latest movie releases coming soon.'\r\n})\r\n\r\n// Stores\r\nconst filtersStore = useFiltersStore()\r\nconst config = useRuntimeConfig()\r\nconst route = useRoute()\r\nconst router = useRouter()\r\n\r\n// State\r\nconst movies = ref([])\r\nconst loading = ref(false)\r\nconst error = ref(null)\r\nconst currentPage = ref(1)\r\nconst totalPages = ref(1)\r\nconst totalResults = ref(0)\r\n\r\n// Category for filters\r\nconst category = 'movies-upcoming'\r\n\r\n// Computed\r\nconst currentFilters = computed(() => filtersStore.getFilters(category))\r\nconst hasActiveFilters = computed(() => filtersStore.hasActiveFilters(category))\r\nconst hasMorePages = computed(() => currentPage.value < totalPages.value)\r\n\r\n// Methods\r\nconst fetchMovies = async (page = 1, append = false) => {\r\n  loading.value = true\r\n  error.value = null\r\n\r\n  try {\r\n    const params = filtersStore.buildApiParams(category, config.public.tmdbApiKey)\r\n    \r\n    const endpoint = hasActiveFilters.value ? '/discover/movie' : '/movie/upcoming'\r\n    \r\n    const response = await $fetch(`${config.public.tmdbBaseUrl}${endpoint}`, {\r\n      params: {\r\n        ...params,\r\n        page\r\n      }\r\n    })\r\n\r\n    if (append) {\r\n      movies.value = [...movies.value, ...response.results]\r\n    } else {\r\n      movies.value = response.results\r\n    }\r\n\r\n    currentPage.value = response.page\r\n    totalPages.value = response.total_pages\r\n    totalResults.value = response.total_results\r\n\r\n    // Update URL with filters\r\n    const query = filtersStore.buildUrlQuery(category)\r\n    if (Object.keys(query).length > 0) {\r\n      await router.replace({ query })\r\n    } else {\r\n      await router.replace({ query: {} })\r\n    }\r\n  } catch (err) {\r\n    console.error('Error fetching movies:', err)\r\n    error.value = 'Failed to load movies. Please try again.'\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\nconst loadMore = () => {\r\n  if (hasMorePages.value && !loading.value) {\r\n    fetchMovies(currentPage.value + 1, true)\r\n  }\r\n}\r\n\r\nconst handleFiltersChanged = () => {\r\n  currentPage.value = 1\r\n  fetchMovies()\r\n}\r\n\r\nconst clearAllFilters = () => {\r\n  filtersStore.resetCategory(category)\r\n  fetchMovies()\r\n}\r\n\r\n// Watch for filter changes\r\nwatch(\r\n  () => filtersStore.getFilters(category), \r\n  (newFilters) => {\r\n    if (newFilters) {\r\n      fetchMovies()\r\n    }\r\n  },\r\n  { deep: true }\r\n)\r\n\r\n// Initialize from URL query\r\nonMounted(() => {\r\n  if (route.query && Object.keys(route.query).length > 0) {\r\n    filtersStore.setFromUrlQuery(category, route.query)\r\n  }\r\n  fetchMovies()\r\n})\r\n</script>\r\n"],"names":["_ssrRenderAttrs","_mergeProps","_push","_parent","_ssrRenderComponent","_ssrRenderList","_ssrInterpolate"],"mappings":"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"}